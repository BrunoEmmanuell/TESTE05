<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evoluafit</title> <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="css/styles.css"> </head>
<body>

<div class="container">

    <div id="authDiv">
        <h3 class="text-center mb-4 fw-bold" style="color: var(--cor-destaque-primario);">Evoluafit</h3>

        <ul class="nav nav-tabs" id="authTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#loginPane" type="button" role="tab" aria-controls="loginPane" aria-selected="true">Login</button>
            </li>
            </ul>
        <div class="tab-content" id="authTabsContent">
            <div class="tab-pane fade show active" id="loginPane" role="tabpanel" aria-labelledby="login-tab">
                 <form onsubmit="login(); return false;">
                     <div class="mb-3">
                         <label for="loginUsername" class="form-label">Usuário</label>
                         <input type="text" class="form-control" id="loginUsername" required>
                     </div>
                     <div class="mb-3">
                         <label for="loginPassword" class="form-label">Senha</label>
                         <input type="password" class="form-control" id="loginPassword" required>
                     </div>
                     <button type="submit" class="btn btn-primary w-100 btn-lg">Entrar</button>
                 </form>
                 <div class="msg mt-3" id="loginMsg"></div>
                 <p class="mt-3 text-center small text-muted">Use as credenciais de instrutor.</p>
            </div>
            </div>
    </div>

    <div id="mainAppDiv" style="display: none;">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <span class="h4 mb-0 fw-bold" style="color: var(--cor-destaque-primario);">Evoluafit</span>
            <div id="userInfo" class="text-end"></div>
        </div>

        <ul class="nav nav-tabs" id="mainTabs" role="tablist">
            <li class="nav-item" role="presentation"><button class="nav-link active" id="gerar-tab" data-bs-toggle="tab" data-bs-target="#gerarTreino" type="button" role="tab"><i class="bi bi-people me-2"></i>Alunos/Gerar</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="cadastro-tab" data-bs-toggle="tab" data-bs-target="#cadastro" type="button" role="tab"><i class="bi bi-person-plus me-2"></i>Novo Aluno</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="plano-tab" data-bs-toggle="tab" data-bs-target="#plano" type="button" role="tab"><i class="bi bi-calendar-week me-2"></i>Plano Atual</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="historico-tab" data-bs-toggle="tab" data-bs-target="#historico" type="button" role="tab"><i class="bi bi-clock-history me-2"></i>Histórico</button></li>
        </ul>

        <div class="tab-content pt-4" id="mainTabContent">

            <div class="tab-pane fade" id="cadastro" role="tabpanel">
                <form id="formCadastroAluno">
                    <div class="container-fluid px-0">
                        <h4 class="section-title">Dados Básicos</h4>
                        <div class="row g-3 mb-4"> <div class="col-md-6">
                                <label for="nome" class="form-label">Nome Completo:</label>
                                <input type="text" class="form-control" id="nome" required/>
                            </div>
                            <div class="col-md-3">
                                <label for="sexo" class="form-label">Sexo:</label>
                                <select id="sexo" class="form-select" required>
                                    <option value="" disabled selected>Selecione...</option>
                                    <option value="Masculino">Masculino</option>
                                    <option value="Feminino">Feminino</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label for="idade" class="form-label">Idade:</label>
                                <input type="number" class="form-control" id="idade" min="10" max="120" required/>
                            </div>
                            <div class="col-md-6 mt-3"> <label for="nivel" class="form-label">Nível de Experiência:</label>
                                <select id="nivel" class="form-select" required>
                                    <option value="" disabled selected>Selecione...</option>
                                    <option value="Iniciante">Iniciante</option>
                                    <option value="Intermediario">Intermediário</option> <option value="Avancado">Avançado</option> </select>
                            </div>
                        </div>

                        <h4 class="section-title">Objetivos e Histórico</h4>
                        <div class="row g-3 mb-3">
                             <div class="col-md-6">
                                 <label for="foco_treino" class="form-label">Foco Principal:</label>
                                 <select id="foco_treino" class="form-select" required>
                                     <option value="" disabled selected>Selecione...</option>
                                     <option value="hipertrofia">Hipertrofia</option>
                                     <option value="forca">Força</option>
                                     <option value="resistencia">Resistência</option>
                                     <option value="emagrecimento">Emagrecimento</option>
                                     <option value="funcional">Funcional/Geral</option>
                                     <option value="gluteo">Glúteo (Foco Fem.)</option>
                                     <option value="outro">Outro (Descrever)</option>
                                 </select>
                             </div>
                             <div class="col-md-6">
                                 <label for="historico_lesoes" class="form-label">Principal Lesão/Dor Ativa:</label>
                                 <select id="historico_lesoes" class="form-select">
                                     <option value="" selected>Nenhuma</option>
                                     <option value="ombro">Ombro</option>
                                     <option value="lombar">Lombar</option>
                                     <option value="joelho">Joelho</option>
                                     <option value="punho">Punho</option>
                                     <option value="cotovelo">Cotovelo</option>
                                     <option value="hernia_disco">Hérnia Disco</option>
                                     <option value="outro">Outra (Descrever)</option>
                                 </select>
                             </div>
                         </div>
                         <div class="mb-4">
                             <label for="objetivos" class="form-label">Observações / Detalhes:</label>
                             <textarea id="objetivos" class="form-control" rows="3" placeholder="Ex: Melhorar postura, preparar para corrida 10km, dor específica no manguito rotador esquerdo..."></textarea>
                         </div>

                        <h4 class="section-title">Medidas <small class="text-muted fw-normal">(Opcional)</small></h4>
                        <p class="small text-muted mb-3">Use PONTO para decimais (ex: 75.5). Indique a unidade no nome do campo (cm ou mm).</p>

                        <div class="row g-3 mb-3">
                             <div class="col-12"><h5>Geral</h5></div>
                             <div class="col-sm-4 col-md-3 col-lg-2"> <label for="cad_altura_cm" class="form-label">Altura(cm):</label>
                                 <input type="number" step="0.1" id="cad_altura_cm" name="altura_cm" class="form-control"/>
                             </div>
                             <div class="col-sm-4 col-md-3 col-lg-2">
                                 <label for="cad_peso_kg" class="form-label">Peso(kg):</label>
                                 <input type="number" step="0.1" id="cad_peso_kg" name="peso_kg" class="form-control"/>
                             </div>
                             <div class="col-sm-4 col-md-3 col-lg-2">
                                 <label for="cad_circ_ombros_cm" class="form-label">Ombros(cm):</label>
                                 <input type="number" step="0.1" id="cad_circ_ombros_cm" name="circ_ombros_cm" class="form-control"/>
                             </div>
                             <div class="col-sm-4 col-md-3 col-lg-2">
                                 <label for="cad_circ_peito_cm" class="form-label">Tórax(cm):</label>
                                 <input type="number" step="0.1" id="cad_circ_peito_cm" name="circ_peito_cm" class="form-control"/>
                             </div>
                             <div class="col-sm-4 col-md-3 col-lg-2">
                                 <label for="cad_circ_cintura_cm" class="form-label">Cintura(cm):</label>
                                 <input type="number" step="0.1" id="cad_circ_cintura_cm" name="circ_cintura_cm" class="form-control"/>
                             </div>
                             <div class="col-sm-4 col-md-3 col-lg-2">
                                 <label for="cad_circ_quadril_cm" class="form-label">Quadril(cm):</label>
                                 <input type="number" step="0.1" id="cad_circ_quadril_cm" name="circ_quadril_cm" class="form-control"/>
                             </div>
                        </div>

                         <div class="row g-3 mb-3">
                            <div class="col-12"><h5>Superiores (cm)</h5></div>
                            <div class="col-sm-4 col-md-3 col-lg-2">
                                <label for="cad_circ_biceps_d_relaxado_cm" class="form-label">Bíc D.Rel:</label>
                                <input type="number" step="0.1" id="cad_circ_biceps_d_relaxado_cm" name="circ_biceps_d_relaxado_cm" class="form-control"/>
                            </div>
                             <div class="col-sm-4 col-md-3 col-lg-2">
                                <label for="cad_circ_biceps_e_relaxado_cm" class="form-label">Bíc E.Rel:</label>
                                <input type="number" step="0.1" id="cad_circ_biceps_e_relaxado_cm" name="circ_biceps_e_relaxado_cm" class="form-control"/>
                            </div>
                             <div class="col-sm-4 col-md-3 col-lg-2">
                                <label for="cad_circ_biceps_d_contraido_cm" class="form-label">Bíc D.Contr:</label>
                                <input type="number" step="0.1" id="cad_circ_biceps_d_contraido_cm" name="circ_biceps_d_contraido_cm" class="form-control"/>
                            </div>
                            <div class="col-sm-4 col-md-3 col-lg-2">
                                <label for="cad_circ_biceps_e_contraido_cm" class="form-label">Bíc E.Contr:</label>
                                <input type="number" step="0.1" id="cad_circ_biceps_e_contraido_cm" name="circ_biceps_e_contraido_cm" class="form-control"/>
                            </div>
                             <div class="col-sm-4 col-md-3 col-lg-2">
                                <label for="cad_circ_antebraco_d_cm" class="form-label">Anteb D.:</label>
                                <input type="number" step="0.1" id="cad_circ_antebraco_d_cm" name="circ_antebraco_d_cm" class="form-control"/>
                            </div>
                            <div class="col-sm-4 col-md-3 col-lg-2">
                                <label for="cad_circ_antebraco_e_cm" class="form-label">Anteb E.:</label>
                                <input type="number" step="0.1" id="cad_circ_antebraco_e_cm" name="circ_antebraco_e_cm" class="form-control"/>
                            </div>
                        </div>

                        <div class="row g-3 mb-3">
                            <div class="col-12"><h5>Inferiores (cm)</h5></div>
                            <div class="col-sm-6 col-md-3 col-lg-3"> <label for="cad_circ_coxa_d_cm" class="form-label">Coxa D.:</label>
                                <input type="number" step="0.1" id="cad_circ_coxa_d_cm" name="circ_coxa_d_cm" class="form-control"/>
                            </div>
                            <div class="col-sm-6 col-md-3 col-lg-3">
                                <label for="cad_circ_coxa_e_cm" class="form-label">Coxa E.:</label>
                                <input type="number" step="0.1" id="cad_circ_coxa_e_cm" name="circ_coxa_e_cm" class="form-control"/>
                            </div>
                            <div class="col-sm-6 col-md-3 col-lg-3">
                                <label for="cad_circ_panturrilha_d_cm" class="form-label">Pant D.:</label>
                                <input type="number" step="0.1" id="cad_circ_panturrilha_d_cm" name="circ_panturrilha_d_cm" class="form-control"/>
                            </div>
                            <div class="col-sm-6 col-md-3 col-lg-3">
                                <label for="cad_circ_panturrilha_e_cm" class="form-label">Pant E.:</label>
                                <input type="number" step="0.1" id="cad_circ_panturrilha_e_cm" name="circ_panturrilha_e_cm" class="form-control"/>
                            </div>
                        </div>

                        <div class="row g-3 mb-4">
                           <div class="col-12"><h5>Dobras Cutâneas (mm)</h5></div>
                            <div class="col-sm-4 col-md-3 col-lg-3">
                                <label for="cad_dc_triceps_mm" class="form-label">Tríceps:</label>
                                <input type="number" step="0.1" id="cad_dc_triceps_mm" name="dc_triceps_mm" class="form-control"/>
                            </div>
                            <div class="col-sm-4 col-md-3 col-lg-3">
                                <label for="cad_dc_subescapular_mm" class="form-label">Subescapular:</label>
                                <input type="number" step="0.1" id="cad_dc_subescapular_mm" name="dc_subescapular_mm" class="form-control"/>
                            </div>
                            <div class="col-sm-4 col-md-3 col-lg-3">
                                <label for="cad_dc_peitoral_axilar_mm" class="form-label">Peitoral/Axilar:</label>
                                <input type="number" step="0.1" id="cad_dc_peitoral_axilar_mm" name="dc_peitoral_axilar_mm" class="form-control"/>
                            </div>
                            <div class="col-sm-4 col-md-3 col-lg-3">
                                <label for="cad_dc_suprailiaca_mm" class="form-label">Supra-ilíaca:</label>
                                <input type="number" step="0.1" id="cad_dc_suprailiaca_mm" name="dc_suprailiaca_mm" class="form-control"/>
                            </div>
                             <div class="col-sm-4 col-md-3 col-lg-3">
                                <label for="cad_dc_abdominal_mm" class="form-label">Abdominal:</label>
                                <input type="number" step="0.1" id="cad_dc_abdominal_mm" name="dc_abdominal_mm" class="form-control"/>
                            </div>
                             <div class="col-sm-4 col-md-3 col-lg-3">
                                <label for="cad_dc_coxa_mm" class="form-label">Coxa:</label>
                                <input type="number" step="0.1" id="cad_dc_coxa_mm" name="dc_coxa_mm" class="form-control"/>
                            </div>
                             <div class="col-sm-4 col-md-3 col-lg-3">
                                <label for="cad_dc_panturrilha_mm" class="form-label">Panturrilha:</label>
                                <input type="number" step="0.1" id="cad_dc_panturrilha_mm" name="dc_panturrilha_mm" class="form-control"/>
                            </div>
                        </div>

                        <div class="text-center mt-4 pt-3 border-top">
                            <button type="button" class="btn btn-success btn-lg" onclick="cadastrarAluno()">
                                <i class="bi bi-check-circle-fill me-2"></i>Cadastrar Aluno
                            </button>
                        </div>
                        <div class="msg mt-3" id="cadastroMsg"></div>
                    </div>
                </form>
            </div>

            <div class="tab-pane fade show active" id="gerarTreino" role="tabpanel">
                 <div class="p-3 mb-4 border rounded-3">
                     <div class="row g-3 align-items-end mb-3">
                         <div class="col">
                             <label for="alunoNomeBusca" class="form-label">Buscar Aluno:</label>
                             <input type="text" class="form-control" id="alunoNomeBusca" placeholder="Digite o nome...">
                         </div>
                         <div class="col-auto">
                             <button type="button" onclick="buscarAlunoPorNome()" class="btn btn-secondary"><i class="bi bi-search me-1"></i>Buscar</button>
                         </div>
                     </div>
                     <div id="buscaResultados"></div>
                 </div>

                 <div id="alunoSelecionadoInfo" class="alert alert-secondary mt-3 text-center" role="alert">Nenhum aluno selecionado.</div>

                 <div id="containerBotoesAcao" class="mt-3 mb-4" style="display: none;">
                     <button type="button" class="btn btn-outline-secondary btn-sm" id="btnNovaAvaliacao" onclick="abrirModalNovaAvaliacao()">
                         <i class="bi bi-plus-circle"></i> Nova Avaliação
                     </button>
                     <button type="button" class="btn btn-outline-secondary btn-sm" id="btnVerPlanos" onclick="verHistoricoPlanosAluno()">
                         <i class="bi bi-list-task"></i> Planos Ant.
                     </button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="btnVerMedidas" onclick="verHistoricoMedidasAluno()">
                         <i class="bi bi-clipboard-data"></i> Avaliações Ant.
                     </button>
                      <button type="button" id="btnCriarTreino" onclick="gerarPlanoSemanal()" class="btn btn-primary">
                         <i class="bi bi-stars me-1"></i> Gerar Treino IA
                     </button>
                 </div>
                 <div class="msg mt-3" id="gerarTreinoMsg"></div>
            </div>

            <div class="tab-pane fade" id="plano" role="tabpanel">
                <div id="areaImprimivel">

                    <h3 id="tituloPlanoGerado" class="mb-2 text-center non-printable">Plano Atual</h3>

                    <div id="nomeAlunoParaImpressao" class="printable-header mb-3">
                        </div>

                    <div id="tabelaPlanoContainer">
                        <div class="alert alert-info text-center p-4"> <i class="bi bi-info-circle me-2 fs-4 align-middle"></i>
                             Selecione um aluno e clique em "Gerar Treino IA" na aba anterior, ou visualize um plano do histórico.
                         </div>
                    </div>

                    <div id="observacoesGeraisContainer" class="mt-4">
                         </div>

                </div> <div id="feedbackPlanoSection" style="display: none;" class="non-printable">
                     <h5 class="text-center mb-3">Avalie este Plano Gerado:</h5>
                     <div id="feedbackButtonsContainer" class="d-flex justify-content-center gap-2 flex-wrap">
                         <button type="button" class="btn btn-outline-success btn-sm" onclick="enviarFeedbackPlano('Excelente')"><i class="bi bi-hand-thumbs-up"></i> Excelente</button>
                         <button type="button" class="btn btn-outline-primary btn-sm" onclick="enviarFeedbackPlano('Bom')"><i class="bi bi-emoji-smile"></i> Bom</button>
                         <button type="button" class="btn btn-outline-warning btn-sm" onclick="enviarFeedbackPlano('Médio')"><i class="bi bi-emoji-neutral"></i> Médio</button>
                         <button type="button" class="btn btn-outline-danger btn-sm" onclick="enviarFeedbackPlano('Ruim')"><i class="bi bi-hand-thumbs-down"></i> Ruim</button>
                     </div>
                     <div class="msg mt-2 text-center" id="feedbackMsg"></div>
                     <input type="hidden" id="currentPlanoId" value="">
                </div>

                <div class="text-center mt-4 pt-3 border-top non-printable">
                      <button type="button" id="botaoImprimir" class="btn btn-secondary" onclick="imprimirPlano()" style="display: none; margin-right: 10px;"><i class="bi bi-printer me-2"></i> Imprimir Plano</button>
                      <button type="button" id="botaoRegerar" class="btn btn-warning" onclick="regerarPlano()" style="display: none;"><i class="bi bi-arrow-repeat me-2"></i> Gerar Outra Opção</button>
                </div>
            </div>

             <div class="tab-pane fade" id="historico" role="tabpanel">
                 <h3 id="historicoAlunoInfo" class="text-center mb-3">Selecione um aluno</h3>

                 <div id="historicoHeaderActions" style="display: none;">
                     </div>

                 <div class="msg mt-3" id="historicoMsg"></div>
                 <div class="row g-4 mt-2">
                     <div class="col-md-6 mb-3 mb-md-0">
                         <div class="card h-100">
                             <div class="card-header"><h5><i class="bi bi-list-ul me-2"></i>Planos Anteriores</h5></div>
                             <div class="card-body" id="historicoPlanos"><div class="historico-vazio">Nenhum plano.</div></div>
                         </div>
                     </div>
                      <div class="col-md-6">
                         <div class="card h-100">
                             <div class="card-header"><h5><i class="bi bi-rulers me-2"></i>Histórico Avaliações Físicas</h5></div>
                             <div class="card-body" id="historicoMedidas"><div class="historico-vazio">Nenhuma avaliação.</div></div>
                         </div>
                     </div>
                 </div>
            </div> </div> </div> </div> <div class="modal fade" id="modalNovaAvaliacao" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalNovaAvaliacaoLabel">Nova Avaliação</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                 <form id="form-avaliacao-modal"> <p class="text-muted small mb-3">Preencha apenas as medidas que deseja registrar. Você também pode atualizar o nível do aluno aqui.</p>

                    <div class="mb-4 pb-3 border-bottom">
                        <label for="m_nivel_aluno" class="form-label fw-bold">Nível Atual do Aluno:</label>
                        <select id="m_nivel_aluno" name="m_nivel_aluno" class="form-select form-select-sm">
                             <option value="Iniciante">Iniciante</option>
                             <option value="Intermediário">Intermediário</option>
                             <option value="Avançado">Avançado</option>
                        </select>
                        <input type="hidden" id="m_nivel_original_aluno" value="">
                    </div>

                    <h4 class="section-title mt-2 mb-3 !important">Medidas</h4>

                    <p class="small text-muted mt-3 mb-1 fw-bold">Geral</p>
                    <div class="row g-2"> <div class="col-sm-4 col-md-3 col-lg-2"><label class="form-label">Altura(cm):</label><input type="number" step="0.1" id="m_altura_cm" name="altura_cm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-4 col-md-3 col-lg-2"><label class="form-label">Peso(kg):</label><input type="number" step="0.1" id="m_peso_kg" name="peso_kg" class="form-control form-control-sm"/></div>
                         <div class="col-sm-4 col-md-3 col-lg-2"><label class="form-label">Ombros(cm):</label><input type="number" step="0.1" id="m_circ_ombros_cm" name="circ_ombros_cm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-4 col-md-3 col-lg-2"><label class="form-label">Tórax(cm):</label><input type="number" step="0.1" id="m_circ_peito_cm" name="circ_peito_cm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-4 col-md-3 col-lg-2"><label class="form-label">Cintura(cm):</label><input type="number" step="0.1" id="m_circ_cintura_cm" name="circ_cintura_cm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-4 col-md-3 col-lg-2"><label class="form-label">Quadril(cm):</label><input type="number" step="0.1" id="m_circ_quadril_cm" name="circ_quadril_cm" class="form-control form-control-sm"/></div>
                    </div>

                    <p class="small text-muted mt-3 mb-1 fw-bold">Superiores(cm)</p>
                     <div class="row g-2">
                         <div class="col-sm-4 col-md-3 col-lg-2"><label class="form-label">Bíc D.Rel:</label><input type="number" step="0.1" id="m_circ_biceps_d_relaxado_cm" name="circ_biceps_d_relaxado_cm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-4 col-md-3 col-lg-2"><label class="form-label">Bíc E.Rel:</label><input type="number" step="0.1" id="m_circ_biceps_e_relaxado_cm" name="circ_biceps_e_relaxado_cm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-4 col-md-3 col-lg-2"><label class="form-label">Bíc D.Contr:</label><input type="number" step="0.1" id="m_circ_biceps_d_contraido_cm" name="circ_biceps_d_contraido_cm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-4 col-md-3 col-lg-2"><label class="form-label">Bíc E.Contr:</label><input type="number" step="0.1" id="m_circ_biceps_e_contraido_cm" name="circ_biceps_e_contraido_cm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-4 col-md-3 col-lg-2"><label class="form-label">Anteb D.:</label><input type="number" step="0.1" id="m_circ_antebraco_d_cm" name="circ_antebraco_d_cm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-4 col-md-3 col-lg-2"><label class="form-label">Anteb E.:</label><input type="number" step="0.1" id="m_circ_antebraco_e_cm" name="circ_antebraco_e_cm" class="form-control form-control-sm"/></div>
                     </div>

                     <p class="small text-muted mt-3 mb-1 fw-bold">Inferiores(cm)</p>
                     <div class="row g-2">
                         <div class="col-sm-6 col-md-3 col-lg-3"><label class="form-label">Coxa D.:</label><input type="number" step="0.1" id="m_circ_coxa_d_cm" name="circ_coxa_d_cm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-6 col-md-3 col-lg-3"><label class="form-label">Coxa E.:</label><input type="number" step="0.1" id="m_circ_coxa_e_cm" name="circ_coxa_e_cm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-6 col-md-3 col-lg-3"><label class="form-label">Pant D.:</label><input type="number" step="0.1" id="m_circ_panturrilha_d_cm" name="circ_panturrilha_d_cm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-6 col-md-3 col-lg-3"><label class="form-label">Pant E.:</label><input type="number" step="0.1" id="m_circ_panturrilha_e_cm" name="circ_panturrilha_e_cm" class="form-control form-control-sm"/></div>
                     </div>

                     <p class="small text-muted mt-3 mb-1 fw-bold">Dobras(mm)</p>
                     <div class="row g-2">
                         <div class="col-sm-4 col-md-3 col-lg-3"><label class="form-label">Tríceps:</label><input type="number" step="0.1" id="m_dc_triceps_mm" name="dc_triceps_mm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-4 col-md-3 col-lg-3"><label class="form-label">Subescapular:</label><input type="number" step="0.1" id="m_dc_subescapular_mm" name="dc_subescapular_mm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-4 col-md-3 col-lg-3"><label class="form-label">Peitoral/Axilar:</label><input type="number" step="0.1" id="m_dc_peitoral_axilar_mm" name="dc_peitoral_axilar_mm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-4 col-md-3 col-lg-3"><label class="form-label">Supra-ilíaca:</label><input type="number" step="0.1" id="m_dc_suprailiaca_mm" name="dc_suprailiaca_mm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-4 col-md-3 col-lg-3"><label class="form-label">Abdominal:</label><input type="number" step="0.1" id="m_dc_abdominal_mm" name="dc_abdominal_mm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-4 col-md-3 col-lg-3"><label class="form-label">Coxa:</label><input type="number" step="0.1" id="m_dc_coxa_mm" name="dc_coxa_mm" class="form-control form-control-sm"/></div>
                         <div class="col-sm-4 col-md-3 col-lg-3"><label class="form-label">Panturrilha:</label><input type="number" step="0.1" id="m_dc_panturrilha_mm" name="dc_panturrilha_mm" class="form-control form-control-sm"/></div>
                     </div>
                 </form>
                 </div>
            <div class="modal-footer">
                 <div class="msg me-auto" id="modalMsg" style="margin-top: 0;"></div>
                 <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                 <button type="button" class="btn btn-primary" onclick="salvarNovaMedicao()">Salvar Avaliação</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modalDadosCadastro" tabindex="-1" aria-labelledby="modalDadosCadastroLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg"> <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalDadosCadastroLabel">Dados Cadastrais Completos</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="modalDadosCadastroBody">
        <p class="text-center text-muted">Carregando dados do aluno...</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
        </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modalDetalhesAvaliacao" tabindex="-1" aria-labelledby="modalDetalhesAvaliacaoLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable"> <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalDetalhesAvaliacaoLabel">Detalhes da Avaliação</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="modalDetalhesAvaliacaoBody">
          <p class="text-center text-muted">Carregando detalhes...</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
        </div>
      </div>
    </div>
  </div>

<div class="modal fade" id="modalSubstituirExercicio" tabindex="-1" aria-labelledby="modalSubstituirExercicioLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalSubstituirExercicioLabel">Substituir Exercício</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <h6>Exercício Atual:</h6>
        <div id="substituirExercicioAtualInfo" class="mb-3 p-3 border rounded">
            <p class="placeholder-glow"><span class="placeholder col-8"></span></p>
        </div>

        <hr>

        <h6>Alternativas Sugeridas:</h6>
        <div id="substituirAlternativasContainer">
            <p class="text-muted">Carregando sugestões...</p>
             </div>

        <input type="hidden" id="substituirDiaRef">
        <input type="hidden" id="substituirIndexRef">
        <input type="hidden" id="substituirChaveRef">

      </div>
      <div class="modal-footer">
         <div class="msg me-auto" id="substituirMsg" style="margin-top: 0;"></div>
         <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
         <button type="button" class="btn btn-primary" id="btnConfirmarSubstituicao" disabled>Confirmar Substituição</button> </div>
    </div>
  </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="js/main.js"></script>

</body>
</html>